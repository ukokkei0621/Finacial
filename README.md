# Finacial

このリポジトリは、Streamlitを使用して資産運用のモンテカルロシミュレーションを行うPythonアプリケーションを格納しています。ユーザーは資産配分、収支、突発イベントなどを入力し、将来の資産推移やキャッシュフローを視覚化できます。

## プロジェクトの概要

`monte5.py` は、以下の機能を提供します：
- **資産運用シミュレーション**：モンテカルロ法を用いて、資産推移のパーセンタイル（10%、25%、50%、75%、90%）を計算。
- **ポートフォリオ分析**：期待リターンとリスク（標準偏差）を計算。
- **突発イベント**：突発収入・支出を設定可能（単発、連続、条件付き）。
- **視覚化**：
  - 資産推移グラフ（現金資産と運用資産の積み上げ棒グラフ）。
  - キャッシュフローグラフ（収入、支出、取り崩しの棒グラフ）。
  - 詳細表（パーセンタイルごとの資産推移、運用損益率など）。
- **カスタマイズ**：
  - 運用損益率は小数点以下第2位で表示。
  - マイナス値は赤字で強調。
  - キャッシュフローグラフの縦軸は -50M～+50M に固定。

## インストール

以下の手順で環境をセットアップしてください。

### 前提条件
- Python 3.13 以上
- Git（リポジトリをクローンする場合）

### 依存関係のインストール
必要なライブラリをインストールします：
```bash
pip install streamlit numpy pandas plotly

リポジトリのクローン
リポジトリをクローンします：
bash

git clone https://github.com/[ユーザー名]/monte-carlo-asset-simulation.git
cd monte-carlo-asset-simulation

使い方
スクリプトの実行：
Streamlitアプリケーションを起動します：
bash

streamlit run monte5.py

入力パラメータの設定：
サイドバーで基本情報（名前、年齢）、収支、退職情報、年金、資産状況、取り崩し方法、運用年数などを入力。

ポートフォリオ（CurrentおよびEnding）を設定（例：米国株70%、ゴールド5%）。

突発収入・支出を設定（例：48歳で500万円の収入、58歳で300万円の支出）。

シミュレーション回数（例：1000回）を指定。

シミュレーションの実行：
「シミュレーション実行」ボタンをクリック。

結果として、資産枯渇確率、パーセンタイルごとの資産推移、詳細表、グラフが表示されます。

結果の確認：
ポートフォリオ：期待リターン（例：10.23%）、リスク（例：15.87%）。

タブ：10%、25%、50%、75%、90%のパーセンタイルで詳細表、資産推移グラフ、キャッシュフローグラフを確認。

表：運用損益率は小数点第2位（例：6.37%）、マイナス値は赤字。

グラフ：キャッシュフローグラフの縦軸は -50M～+50M。

ファイル構成
monte5.py：メインスクリプト（モンテカルロシミュレーションとStreamlitアプリケーション）。

README.md：このドキュメント。

機能詳細
ポートフォリオ設定：
アセット：米国株（12.1%、18.4%）、先進国株式（除く米国）（8.6%、17.6%）、新興国株式、米国長期債券、ゴールド。

初期ポートフォリオ（例：米国株70%、ゴールド5%）、終了ポートフォリオ（例：米国株55%、ゴールド20%）。

突発イベント：
単発（例：48歳で500万円）、連続（例：50～53歳で毎年200万円）、条件付き（例：資産が5000万円以上で1000万円）。

年齢範囲：43～82歳（運用年数40年の場合）。

視覚化：
資産推移：積み上げ棒グラフ（現金：青、運用：緑）。

キャッシュフロー：棒グラフ（収入：青、支出：赤、取り崩し：緑）。

詳細表：3桁コンマ（例：91,968,070）、マイナス赤字、運用損益率2桁。

注意点
乱数依存：シミュレーション結果は乱数に基づくため、毎回若干異なる可能性があります。

パフォーマンス：大量シミュレーション（例：10000回）や長期間（例：40年）で遅延する場合、キャッシュや並列化を検討してください。

環境：Python 3.13で動作確認済み。ライブラリバージョン（例：Streamlit 1.20+, Plotly 5.10+）に注意。

ライセンス
このプロジェクトは MIT License (LICENSE) の下で公開されています。
貢献
バグ報告や機能追加の提案は、Issue または Pull Request でお気軽にどうぞ！
連絡先
作成者：@ukokkei0621

メール：[msykymgch0621@gmail.com (mailto:msykymgch0621@gmail.com)]

Happy simulating! 
